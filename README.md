# ‚≠ê TrickyStore Helper
**Enhanced companion module for TrickyStore**  
Automatically maintains an optimal `target.txt`, supports system app forcing, safe-guard modes, UI/boot operation, and full logging.

Based on original work by **Captain_Throwback**  
Enhanced & maintained by **shoey63**

---

## üìå Overview

TrickyStore Helper automates and improves the generation of `target.txt`, which TrickyStore uses to manage Play Integrity spoofing.  
This module:

- Updates `target.txt` on every boot **or** manually via the KernelSU Action Button  
- Supports **user apps + system apps**
- Or **user apps** only 
- Provides **force.txt** to always include certain packages  
- Provides **exclude.txt** to always remove certain packages  
- Offers two force modes:
  - `FORCE_LEAF_HACK` ‚Äì temporarily override TrickyStore‚Äôs leaf-hacking behaviour  
  - `FORCE_CERT_GEN` ‚Äì force new certificate generation  
- Includes a **true/true anomaly safety system**  
- Logs everything to a single file:  
  üëâ `/data/adb/tricky_store/helper/helper.log`

---

## üìÅ File Locations

| File | Purpose |
|------|---------|
| `/data/adb/tricky_store/helper/config.txt` | Main configuration |
| `/data/adb/tricky_store/helper/force.txt` | Packages to always add |
| `/data/adb/tricky_store/helper/exclude.txt` | Packages to always remove |
| `/data/adb/tricky_store/target.txt` | Autogenerated package list |
| `/data/adb/tricky_store/helper/helper.log` | Full logs from all scripts |

---

## ‚öôÔ∏è Configuration (config.txt)

```
FORCE_LEAF_HACK=false
FORCE_CERT_GEN=false
USE_DEFAULT_EXCLUSIONS=true
```

### üîπ FORCE_LEAF_HACK
Temporarily forces leaf hack mode for the next run only.

### üîπ FORCE_CERT_GEN
Forces full certificate regeneration during next run only.

### üîπ USE_DEFAULT_EXCLUSIONS
If true, system bloat / irrelevant packages are excluded automatically.

---

## üìÑ force.txt

Add any package name here to **force-include** it into `target.txt`, even if default exclusions would normally remove it.

Example:
```
com.android.vending
com.google.android.aicore
```

System apps are validated against `pm list packages` before inclusion.

---

## üìÑ exclude.txt

Packages listed here are **always removed** from the final `target.txt`.

Example:
```
com.facebook.katana
com.microsoft.office.outlook
```

---

## üöÄ How It Works

### ‚úî On Boot
- `service.sh` runs automatically  
- Logging starts immediately  
- `target.txt` is regenerated  
- True/True anomaly is **temporarily auto-corrected at boot**  
- Warning is logged if anomaly was detected

### ‚úî Action Button (UI Mode)
- `action.sh` runs **only** helper logic  
- UI output displayed in KernelSU  
- Full logs still written to `helper.log`

### ‚úî helper.sh (core logic)
Handles:
- Logging  
- Loading config  
- Parsing user/system apps  
- Force includes  
- Exclusions  
- Target regeneration  
- Safety checks  
- Killing Play Store + GMS (so integrity updates immediately)

---

## üîç Troubleshooting

### `target.txt` not updating?
- No need to chmod anything ‚Äî **permissions auto-fix on every boot**.
- Check the log:  
  `/data/adb/tricky_store/helper/helper.log`
- Make sure KernelSU/Magisk/APatch allows boot scripts to run.
- Test helper manually:
  ```
  sh /data/adb/tricky_store/helper/helper.sh --ui
  ```

### `FORCE_LEAF_HACK` and `FORCE_CERT_GEN` stays true?
They **are only temporarily set to false** to allow helper.sh to run.
You need reset to set one or both to `false` yourself.

### Warning not showing?
Warnings now appear:
- Immediately during UI mode  
- Early during boot  
- Always logged in `helper.log`

---

## üîß Installation Notes

- Requires **TrickyStore** to already be installed.
- Helper auto-creates:
  - `config.txt` (with safe defaults)
  - `exclude.txt`
  - `force.txt`
- Existing user files are **never overwritten**.

---

## üßæ module.prop

```
id=trickystorehelper
name=TrickyStore Helper
version=v0.3.0
versionCode=300
author=shoey63 (based on work by Captain_Throwback)
description=Enhanced TrickyStore Helper ‚Äî automatically updates target.txt at boot or via action button, supports user+system apps, and force modes for spoofing.
```

---

## ‚ù§Ô∏è Credits

- **Captain_Throwback** ‚Äî original TrickyStore Helper creator  
- **shoey63** ‚Äî rewrite, enhancements, UI mode, safety system, full logging

---

## üìò License

MIT License ‚Äî you are free to fork, modify, and redistribute.
